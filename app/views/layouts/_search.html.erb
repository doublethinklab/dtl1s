<% title params.values[0..-2].join('_') %>
<% if params[:start_date] || params[:end_date] %>
<%= date_field_tag :start_date, params[:start_date] %> ~
<%= date_field_tag :end_date, params[:end_date] %>
<% else %>
<%= date_field_tag :start_date, params[:start_date], value: Date.today %> ~
<%= date_field_tag :end_date, params[:end_date], value: Date.today %>
<% end %>
<%= submit_tag "Search", :name => nil %>
<% if params[:description].present? %>
in 
<%= button_tag(type: 'submit', :name => "start_date", value: Date.today-3.days) do %>
  3 days
<% end %>

<%= button_tag(type: 'submit', :name => "start_date", value: Date.today-7.days) do %>
  7 days
<% end %>

<%= button_tag(type: 'submit', :name => "start_date", value: Date.today-30.days) do %>
  30 days
<% end %>

<%= button_tag(type: 'submit', :name => "start_date", value: Date.today-90.days) do %>
  90 days
<% end %>

<%= button_tag(type: 'submit', :name => "start_date", value: Date.today-1.year) do %>
  1 year
<% end %>

<% end %>
<br>

<% params[:description].split('+').each do |x| %>
  <%= link_to "#{x} ❌", controller: request.path_info.gsub('/',''), action: 'index', params: {description: params[:description].gsub("#{x}+",'').gsub("#{x}",''), start_date: params[:start_date] || @genes[:date], end_date: params[:end_date] || @genes[:date]} %>
<% end if params[:description] %>

<% (@genes.map{|x| x[1]['tag']}+ENV['GENE_NEWS'].split(',')).each do |g| %>
  <% word = (g ? (URI.decode g) : '') %>
  <%= link_to word, controller: request.path_info.gsub('/','').present? ? request.path_info.gsub('/','') : 'posts', action: 'index', params: {description: (params[:description] ? word+'+'+params[:description] : word), start_date: params[:start_date] || @genes[:date], end_date: params[:end_date] || @genes[:date]}) unless params[:description] && (params[:description].split('+').include? word %>
<% end  %>
